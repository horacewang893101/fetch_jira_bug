# Bug 分析报告

**生成时间:** 2026-01-21 20:14:54

---

## 统计摘要

- **总 Bug 数:** 89
- **需要紧急修复:** 74
- **可以延后处理:** 15


## Bug 分析详情

### MP-110 ⚪ **无内容**

**概述:**
该 Bug 文档仅包含标题“LATAM Rollout”，状态为 To Do，但描述为空，缺少问题现象、复现步骤、影响范围与预期/实际结果等关键信息。无法判断这是功能需求、发布任务还是实际缺陷。由于缺乏可验证的错误行为与影响信息，当前无法评估严重程度与受影响用户范围。需要补充完整信息后才能进行有效分析与修复规划。

**修复优先级:**
文档无具体缺陷描述与影响评估依据，无法确定是否存在用户阻断、数据风险或安全风险，因此暂不建议作为高优先级紧急处理。

**修复建议:**
补充最小可用信息：实际问题描述、复现步骤、预期/实际结果、影响地区/用户、日志/截图与时间窗口；若“LATAM Rollout”是发布任务而非缺陷，请将其转为对应的 Epic/Task 并明确验收标准与负责人。

---

### MP-148 ⚪ **无内容**

**概述:**
该 Bug 文档仅包含标题“Test”，状态为 Cancelled，且描述为 None，缺乏任何可用于定位问题的细节信息。无法判断具体的核心问题、触发条件、影响范围或严重程度。由于已取消且无内容，当前无法进行有效的缺陷分析或复现评估。

**修复优先级:**
该条目已标记为 Cancelled 且没有任何问题描述、复现步骤或影响说明，无法确认存在需要紧急处理的风险或用户影响。

**修复建议:**
补充最小必要信息（预期/实际结果、复现步骤、环境、日志/截图、影响范围）后再重新评估；若确认为误建或重复项，则保持取消并关闭即可。

---

### MP-262 🔴 **紧急**

**概述:**
安装后在 AKS 的 serviceme 命名空间中存在名为 storage-secret 的 Opaque Secret，直接以 base64 编码存放存储账号名称与 account key。由于 base64 仅是可逆编码，任何有权限读取该 Secret 的人都能轻易解码获取明文凭据。凭据泄露可能导致存储账号被接管、数据被读取/篡改/删除，影响范围覆盖该集群内可访问该 Secret 的主体以及关联的存储账户数据。该问题属于高严重度的凭据不安全存储与潜在数据泄露风险。

**修复优先级:**
该 Secret 暴露了可直接控制存储账户的高权限密钥，一旦被读取即可造成数据泄露或破坏，安全风险高且影响面可能较大。集群已具备 Key Vault + CSI 能力，修复路径清晰，应尽快处理以降低暴露窗口。

**修复建议:**
将存储账号凭据迁移至 Azure Key Vault，并通过 Secrets Store CSI Driver（或 Workload Identity/Managed Identity）按需挂载/注入，避免在 Kubernetes Opaque Secret 中长期存放明文可逆数据。同步收紧 RBAC（限制对该 Secret/命名空间的读取）并轮换当前 storage account key，确保历史泄露不会继续生效。

---

### MP-263 🔴 **紧急**

**概述:**
该问题指出 AKS 中 Kubernetes Secrets 默认存储在 etcd 内，若未显式启用 KMS/etcd 加密，则主要依赖平台默认存储保护。任何拥有读取 Secrets 权限的主体仍可直接取回明文敏感信息（如镜像仓库 token、存储账号凭据），增加凭据泄露与横向移动风险。影响范围覆盖集群内所有以 Secret 形式保存的敏感数据，属于配置/安全加固缺失类问题。严重程度偏高，尤其对生产环境与合规要求较高的场景影响更大。

**修复优先级:**
涉及静态敏感凭据的保护与潜在泄露风险，一旦 RBAC/身份被滥用或误配，Secrets 可被直接读取，影响面大且可能引发安全事件与合规问题。

**修复建议:**
在 AKS 启用 KMS-based etcd encryption（使用 Azure Key Vault 的客户管理密钥 CMK），并配置密钥轮换策略；同时复核并收紧对 Secrets 的 RBAC 读权限，减少可读取主体范围。

---

### MP-264 🔴 **紧急**

**概述:**
Azure Key Vault 中有两个机密（appsettings、serilogsettings）命名不清晰，无法直观看出其被 knowledge container 使用。该不一致会在排障、密钥轮换与权限审计时造成歧义，增加误操作概率。影响主要集中在运维流程与治理合规层面，可能导致 knowledge container 因误删/误轮换而中断。严重程度中等，但在生产环境会放大为可用性与响应效率问题。

**修复优先级:**
命名歧义会提升误轮换/误删除的风险，一旦发生将直接影响 knowledge container 可用性并拖慢事故响应；同时会削弱访问审计与治理的可靠性。

**修复建议:**
制定并落地统一的 Key Vault secret 命名规范，名称包含明确的消费者/归属（如 knowledge-appsettings、knowledge-serilogsettings）。对现有 secret 执行重命名/迁移（创建新名并更新引用后再逐步弃用旧名），并通过脚本/CI 策略校验防止新增不合规命名。

---

### MP-265 🔴 **紧急**

**概述:**
该 Bug 的核心问题是应用使用 PostgreSQL 默认的 postgres 超级用户账号及默认密码进行连接，导致应用拥有不受限制的数据库权限。即使数据库位于私有链路后方，默认凭据一旦泄露或被内部滥用，仍可能造成未授权访问与数据破坏。影响范围覆盖所有通过该连接配置访问数据库的环境与服务。严重程度高，属于明显的安全配置缺陷，可能引发数据泄露、篡改及横向移动风险。

**修复优先级:**
使用默认超级用户与默认密码属于高危安全问题，攻击成本低且一旦被利用影响面大（全库权限）。即便在私网环境，内部威胁、配置误暴露或日志泄露等都可能触发重大安全事件。

**修复建议:**
立即停用/限制 postgres 超级用户用于应用登录，创建按数据库/Schema 最小权限的专用应用角色并替换连接配置，同时立刻轮换为强随机密码并将凭据纳入密钥管理。若平台支持，优先改用 Azure AD + Managed Identity 等无密码认证方式以降低凭据泄露风险。

---

### MP-266 🔴 **紧急**

**概述:**
Knowledge 工作负载使用的 Key Vault 中 JWT 校验配置存在严重错误：关闭了过期校验（CheckExp=false），且应用 token 有效期约 180 天，同时密钥为静态且未轮换。该组合会导致 token 可被长期复用甚至“近似永久有效”，使会话控制形同虚设。攻击者一旦获取或伪造 token，可能长期冒用身份、提升权限并绕过安全策略。影响范围覆盖所有依赖该 JWT 配置进行鉴权的接口与服务，属于高危安全漏洞。

**修复优先级:**
这是可被利用的认证/授权配置漏洞，会显著扩大 token 泄露或伪造后的攻击窗口，并可能导致持续性未授权访问与权限提升，风险面广且后果严重。

**修复建议:**
立即开启过期校验（CheckExp=true）并将 access token 有效期缩短到 15–60 分钟，同时改用非对称签名（RS256/ES256）并在 Key Vault 实施密钥轮换与 kid 支持；配套启用 refresh token 轮换与吊销机制以降低被盗用后的持续风险。

---

### MP-267 🔴 **紧急**

**概述:**
生产环境对外暴露了 Swagger UI 与 OpenAPI JSON，且无需认证即可访问，攻击者可直接枚举所有 API 端点、参数与数据结构。该信息泄露会显著降低攻击门槛，加速漏洞利用与接口滥用（如撞库、越权、参数探测）。影响范围为所有可访问该域名的外部用户/攻击者，属于安全配置缺陷。严重程度偏高，通常应按安全高优先级处理。

**修复优先级:**
该问题对公网开放且无需登录即可获取完整接口面与 schema，会直接提升被攻击概率与攻击效率，潜在影响面广且难以通过监控完全抵消。

**修复建议:**
在生产环境禁用 Swagger UI 与 openapi.json 路由（按环境开关构建/部署时关闭），或至少加上强认证/授权并结合 IP allowlist（仅内网/VPN/管理员可访问）。同时将文档服务迁移到内部环境或独立受控的文档站点。

---

### MP-268 🔴 **紧急**

**概述:**
该 Bug 的核心问题是知识工作负载配置中使用了静态盐值与对称加密密钥，并以硬编码形式存在于 appsettings 配置（存放于 Key Vault）中，导致密码哈希与数据加密强度显著下降。一旦发生配置泄露或系统被入侵，攻击者可能进行离线口令破解，并使用泄露的密钥对历史数据进行解密。影响范围覆盖所有使用这些静态盐/密钥进行哈希与加密的用户与数据记录，属于系统性安全缺陷。严重程度高，可能导致敏感数据泄露与合规风险。

**修复优先级:**
该问题属于高危加密实践缺陷：静态盐会显著降低抗离线破解能力，而硬编码对称密钥一旦泄露将导致“可追溯解密”历史数据。影响面广且与入侵/泄露场景强相关，应尽快修复并进行密钥轮换以降低既有风险。

**修复建议:**
将所有加密密钥从配置中移除，改为由 Key Vault/密钥管理服务按需获取并建立定期轮换与版本化策略，同时对已加密数据制定重加密/双写迁移方案。密码存储改为每用户/每记录独立随机盐并使用 Argon2id 等强 KDF；对称加密算法从 DES 迁移至 AES-GCM（或其他 AEAD）并配套更新 IV/nonce 生成与存储方式。

---

### MP-269 🔴 **紧急**

**概述:**
当前将整个 appsettings.json 作为一个名为 appsettings 的单一 Secret 存放在 Azure Key Vault。该做法会把非敏感配置与敏感密钥混在一起，导致一旦 Key Vault 权限泄露，攻击者可一次性获取全部应用配置与秘密信息。由于任何单个值变更都要更新整份配置，密钥轮换、审计与日常小改动的运维成本显著上升。整体属于安全与可维护性问题，潜在影响面覆盖所有依赖该配置的环境与服务实例。

**修复优先级:**
这是配置与密钥管理的安全设计缺陷，一旦 Key Vault 访问被滥用会造成全量配置泄露，风险高且影响范围广。同时单一 Secret 使轮换与审计困难，增加密钥长期不更新或泄露后难以及时处置的概率。

**修复建议:**
将敏感项拆分为独立的 Key Vault Secrets（如连接串、密码、签名密钥等），非敏感配置保留在 appsettings.json/环境变量中。采用 Azure Key Vault Configuration Provider（或等价机制）按键动态加载与映射，配合最小权限与分项轮换策略。

---

### MP-270 🔴 **紧急**

**概述:**
MP-270 描述了 Azure Key Vault 中名为 backend-env 的单一 Secret 将多类高敏感信息（数据库/Redis 凭据、LangFlow 管理员账号、加密与应用密钥等）集中打包存放的问题。该“单体 Secret”显著扩大泄露后的爆炸半径，并使密钥轮换与按最小权限进行 RBAC 控制变得困难。一旦该 Secret 被读取或泄露，攻击者可获得对数据库与缓存的完全访问、接管管理后台并利用加密材料进行伪造或解密相关攻击，导致数据外泄与系统被控。影响范围覆盖后端核心数据面与鉴权/加密面，严重程度为 Critical。

**修复优先级:**
该问题属于高价值凭据与加密密钥的集中暴露面，一旦发生泄露将直接导致数据外泄、权限接管与密钥伪造，风险不可接受。且单一 Secret 的访问面更大、误授权/误暴露概率更高，应优先降低爆炸半径并完成轮换。

**修复建议:**
将 backend-env 拆分为按用途划分的独立 Key Vault secrets（DB、Redis、管理员密码、各类密钥等），并立即轮换所有已暴露/可能暴露的凭据与密钥。基于每个 secret 配置最小权限 RBAC，使用 Managed Identity + Key Vault references/CSI Secrets Store 按需注入，避免将非敏感配置与 secrets 混放并防止日志输出环境变量。

---

### MP-271 🔴 **紧急**

**概述:**
该 Bug 的核心问题是在 Knowledge workload 配置中以明文方式定义了 LangFlow 的管理员用户名/密码（LANGFLOW_SUPERUSER / LANGFLOW_SUPERUSER_PASSWORD）。这会使任何能读取配置的人获得直接管理员登录能力，从而接管 LangFlow UI/API。影响包括权限提升、配置篡改以及潜在的数据泄露与服务破坏。属于高严重度的安全漏洞，且具备被快速利用的条件。

**修复优先级:**
明文管理员凭据一旦被访问或泄露即可直接获得最高权限，风险为即时接管与横向影响，属于高危安全问题。修复可显著降低被内部/外部滥用的概率，优先级应高。

**修复建议:**
移除静态管理员账号密码配置，改用 Azure AD/OAuth（配合 MFA）进行管理员认证与授权。若必须保留本地管理员，生成强随机密码并存储在 Key Vault 等密钥管理服务中，完成立即轮换并确保不再以明文出现在配置/日志中。

---

### MP-272 🔴 **紧急**

**概述:**
该 Bug 的核心问题是多个敏感加密/签名材料（LANGFLOW_SECRET_KEY、LANGFLOW_LICENSE_SECRET_KEY、LANGFLOW_ECB_KEY 等）以明文环境变量形式存放在 backend-env 与 celery-env 中。若配置存储、CI/CD、日志或运行环境被泄露，攻击者可直接获取密钥，从而进行 token 伪造、许可证滥用以及对已加密数据的解密。问题影响认证/授权、许可证校验与数据保密性等关键安全链路，属于高危安全缺陷。由于涉及对称密钥与可能的弱加密模式（ECB），一旦泄露后果难以通过单点补救消除。

**修复优先级:**
这是高风险的密钥管理问题，泄露后可导致伪造身份/绕过授权与数据解密，影响面广且后果严重。明文 env 值通常更易在配置仓库、部署系统或运维排障过程中扩散，需尽快收敛与轮换。

**修复建议:**
将每个密钥迁移到受管密钥/秘密管理服务（如 Key Vault）中按最小权限读取，停止在 env/配置中明文落地，并立即执行密钥轮换与吊销旧密钥。加密方案上替换 ECB 等弱模式为 AES-GCM，并引入 kid（密钥版本标识）以支持平滑轮换与多版本验证。

---

### MP-273 🔴 **紧急**

**概述:**
Azure Key Vault 中的 celery-env 将数据库、Redis、管理员密码及应用加密/许可等多类高敏感信息打包在同一个 Secret 里，导致访问控制粒度过粗且轮换困难。一旦该 Secret 被泄露或被过度授权的工作负载读取，攻击者可直接获取 DB/Redis 完整访问权限、接管 LangFlow 管理员账户并利用加密材料进行伪造。该问题显著扩大了泄露的爆炸半径，并增加横向移动与数据外泄风险。影响范围覆盖所有依赖 celery-env 的运行环境与服务，严重程度为 Critical。

**修复优先级:**
单点 Secret 暴露即可导致数据库与缓存的完全失陷及加密材料泄露，属于高影响高概率的权限/泄露风险。且当前打包方式使 RBAC 无法最小权限化，任何读取该 Secret 的主体都会获得全部敏感能力。

**修复建议:**
将 celery-env 拆分为按用途划分的独立 Key Vault secrets（DB、Redis、Admin、加密/许可等），并立即轮换所有已暴露/同包的凭据与密钥；基于每个 secret 配置最小权限 RBAC。使用 Managed Identity + Key Vault reference/CSI Secrets Store 以文件或运行时拉取方式注入，避免将非敏感配置与 secrets 混放并防止日志输出环境变量。

---

### MP-274 🔴 **紧急**

**概述:**
Serilog 的 Key Vault 配置密钥 serilogsettings 中包含 PostgreSQL 连接串，并使用了 postgres 超级用户账号用于日志写入。该配置一旦泄露，攻击者将获得对数据库的完全控制权限，可进行数据窃取、篡改结构与持久化后门等高危操作。问题影响所有读取并使用该 secret 的环境与服务实例，属于敏感信息暴露与权限过大叠加的安全缺陷。整体严重程度为高/严重级别，需优先处理。

**修复优先级:**
这是超级用户凭据暴露导致的数据库完全失陷风险，且一旦 secret 被读取/泄露影响面通常较大且难以追踪。继续使用高权限账号作为日志写入账户会放大任何配置泄露或运行时入侵的破坏范围。

**修复建议:**
立即轮换并撤销 postgres 在日志链路中的使用，创建专用最小权限日志账号（仅对日志表具备 INSERT/必要权限），并更新 Serilog sink 使用该账号。将连接凭据从 serilogsettings 中拆分为独立 Key Vault secret，配置中仅引用 secret 标识并加强访问控制与审计。

---

### MP-275 🔴 **紧急**

**概述:**
该 Bug 的核心问题是将完整的 Serilog 日志配置（包含数据库连接串等敏感凭据）作为单个 Key Vault secret（serilogsettings）存储，导致无法进行细粒度的权限控制与独立轮换。任何获得该 secret 访问权限的主体都可能同时拿到 DB 凭据与日志表结构等实现细节。影响范围覆盖所有依赖该 secret 获取日志配置的环境与服务。严重程度较高，属于敏感信息暴露与密钥管理不当带来的安全风险。

**修复优先级:**
一旦 serilogsettings 被泄露将直接暴露数据库凭据，可能导致未授权访问与数据泄露，安全影响面大且后果严重。同时单体 secret 使得最小权限与凭据轮换难以落实，增加持续风险。

**修复建议:**
将敏感信息（如 DB connection string、凭据）拆分为独立的 Key Vault secrets，并对不同 secret 配置最小权限 RBAC；非敏感的 Serilog 配置保留在应用配置文件/代码中，通过引用方式在运行时组合生成最终配置。完成拆分后立即轮换数据库凭据并审计访问日志以排查是否已发生泄露。

---

### MP-276 🔴 **紧急**

**概述:**
该 Bug 的核心问题是在 serilogsettings secret 中启用了 needAutoCreateTable=true，允许 Serilog 在数据库中自动创建日志表。此行为需要较高数据库权限，扩大了日志写入账号的权限面，带来潜在的安全与合规风险。一旦攻击者获得对日志 sink/配置的访问能力，可能利用该功能创建任意表或修改数据库 schema。影响范围主要在生产环境的日志数据库与相关账号，严重程度偏高（安全风险）。

**修复优先级:**
该配置提升了数据库权限需求并引入可被滥用的 schema 变更能力，属于安全面风险，潜在影响大且一旦被利用后果严重。尤其在生产环境中应尽快收敛权限与禁用自动建表能力。

**修复建议:**
在生产环境将 needAutoCreateTable 设为 false，并通过迁移/脚本预先创建所需日志表。为日志写入账号配置最小权限（仅允许对指定表 INSERT，禁止 DDL/ALTER 等 schema 变更权限），并确保该配置不存放于可被非授权访问的 secret/配置渠道中。

---

### MP-277 🔴 **紧急**

**概述:**
Azure Key Vault 中的 translator-env 将数据库与 Redis 等多个高敏感凭据打包在同一个 Secret 里，导致一旦该 Secret 泄露会产生极大的“爆炸半径”。攻击者可借此直接获取 DB/Redis 访问权限，进而进行数据窃取、缓存/会话劫持以及持久化控制。该问题同时增加了凭据轮换与最小权限（RBAC）实施的复杂度，降低整体安全韧性。属于高严重度的安全配置缺陷，影响所有依赖该 Secret 的环境与服务。

**修复优先级:**
该 Secret 一旦被误授权、日志泄露或被入侵读取，将直接暴露核心数据存储与缓存系统的访问凭据，风险为高影响的安全事件。且当前凭据已在文档中以可用连接串形式出现，需尽快降低泄露窗口并完成轮换。

**修复建议:**
将 translator-env 拆分为按用途的独立 Key Vault secrets（如 DB 连接信息/密码、Redis 密码等），并立即轮换所有已暴露的 DB/Redis 凭据。基于单个 secret 维度配置最小权限 RBAC 与访问审计，非敏感配置移出 Key Vault 或使用独立配置项管理。

---

### MP-278 🔴 **紧急**

**概述:**
该 Bug 的核心问题是前端应用将 Whisper API key 及连接所需信息暴露在浏览器 Local Storage 中，任何能访问该页面环境的用户都可轻易获取。影响范围覆盖所有使用该前端的用户与环境（含生产/测试），一旦泄露即可被滥用调用 Whisper 服务。该问题属于敏感凭据泄露，可能导致未授权访问、费用损失、配额耗尽及潜在数据合规风险。严重程度高，属于安全类高危缺陷。

**修复优先级:**
Local Storage 对终端用户与脚本均可读，密钥一旦发布即等同公开，容易被批量盗用造成直接成本与服务中断风险。问题影响面广且可被立即利用，应尽快修复并轮换密钥。

**修复建议:**
将 Whisper 调用改为后端代理/服务端调用，前端仅获取短期有效的受限令牌或由后端返回处理结果，彻底移除前端存储的长期密钥。立即撤销并轮换现有 API key，同时在密钥管理系统（Key Vault/Secrets Manager）中存储并按最小权限配置与审计。

---

### MP-279 🔴 **紧急**

**概述:**
在创建数据源（如 SQL Server）时，“Port”字段未在前端和后端做任何格式与范围校验，允许提交如“1111SSSS”等非数字值或超出范围的值。该问题会导致保存时仅返回笼统的“connection failed”错误，用户无法定位是端口输入问题，从而影响创建数据源的成功率与使用体验。影响范围覆盖所有通过该页面创建/编辑需要端口的连接配置的用户。严重程度为中等：主要是可用性与可诊断性问题，并可能增加后端无效请求与日志噪音。

**修复优先级:**
该缺陷会直接阻断数据源创建/连接流程并产生误导性错误信息，影响面较广且会显著增加用户排障成本与支持成本，因此应尽快修复。

**修复建议:**
前端对 Port 输入增加数值型限制与范围校验（仅允许整数 0–65535，禁止非数字字符），并在提交前给出明确提示；后端对 port 字段做强校验与类型转换，非法时返回明确的 4xx 参数错误（指出 port 无效/超范围），避免落入连接失败的泛化错误。

---

### MP-280 🔴 **紧急**

**概述:**
后端未对数据源创建接口的字段长度进行校验，导致可绕过 UI 限制提交超长 Name（>50）和 Description（>200）并成功创建数据源（返回 200）。该问题会造成 UI 与后端规则不一致，可能引入脏数据、超长文本导致的展示/查询异常，甚至触发数据库层截断或存储错误。文档指出这是应用内多数字段的“全局性问题”，影响面广。严重程度中到高，取决于下游存储与使用场景（例如是否会导致截断、异常或日志/报表渲染问题）。

**修复优先级:**
该缺陷可被任意客户端直接调用接口稳定复现，且被描述为“多数字段”普遍存在，容易大规模产生不符合约束的数据并引发连锁故障。若底层存储或下游组件对长度敏感，可能导致写入失败、数据截断或服务异常，影响面和修复收益都很高。

**修复建议:**
在后端为请求 DTO/模型增加统一的长度与格式校验（如 name<=50、description<=200），并在校验失败时返回 400（或 422）及明确的字段级错误信息。建议将约束集中配置/复用（与数据库 schema/领域规则一致），并补充自动化测试覆盖边界值与超长输入，避免同类字段再次遗漏。

---

### MP-281 🔴 **紧急**

**概述:**
在 Knowledge Workspace 的 URL 中将对象 ID 修改为不存在或非法值时，后端返回 500 Internal Server Error，表明该路由对无效 ID 缺少输入校验或异常捕获。该问题影响所有通过该入口访问知识空间对象详情/页面的用户与客户端调用。虽然响应体目前仅返回通用“System Error”，但 500 本身会造成用户体验差、监控告警增加，并可能掩盖真实的业务错误类型。若异常细节在日志或其他环境被暴露，存在一定信息泄露与安全风险。

**修复优先级:**
该问题可被任何用户通过构造 URL 轻易触发，导致稳定性与可用性问题并产生大量 500 告警；同时反映出输入校验/异常处理薄弱，存在潜在安全与可观测性风险，需要尽快修复。

**修复建议:**
在路由层对 objectId 做格式校验（如仅允许数字/UUID 等）并对“找不到对象”场景显式返回 404，对格式非法返回 400；在服务/DAO 层补齐异常捕获与统一错误映射，确保任何未处理异常不对外返回 500（或仅在真正服务器故障时返回 500），并返回一致的错误页/JSON。

---

### MP-282 🔴 **紧急**

**概述:**
该 Bug 表现为服务端对 multipart 上传中的 filename 参数校验不足，允许包含 ..\..\ 等目录穿越模式的文件名被接受并持久化。接口返回 200 OK，且在响应的 fullName 字段中原样回显了带穿越片段的名称，UI 中也能看到异常文件名。当前证据表明至少存在输入验证与输出编码/规范化缺陷，并可能为后续文件系统路径拼接埋下隐患。若后续下载、预览或落盘路径构造使用该值，可能升级为真实的路径穿越读写与敏感信息泄露，安全严重性高、影响面可能覆盖所有使用该上传接口的用户/工作区。

**修复优先级:**
这是典型的安全类输入验证缺陷，可能演变为路径穿越导致越权读写/泄露敏感文件，风险上限高且一旦被利用影响面广。当前已确认可被外部请求稳定触发并回显不可信内容，应尽快修复以降低被攻击窗口。

**修复建议:**
服务端对 filename 做强制规范化与白名单校验：仅取 basename（丢弃任何路径分隔符与盘符/UNC 前缀），拒绝包含 ..、/、\、冒号等路径成分，并限制字符集与长度；落盘与后续访问一律使用服务端生成的安全文件名/ID 映射而非用户提供值，同时避免在响应中回显未净化的原始文件名。

---

### MP-288 🔴 **紧急**

**概述:**
该 Bug 的核心问题是应用未实现可观察到的空闲/绝对会话超时机制，导致用户在长时间无操作后仍保持登录状态。JWT access/refresh token 存储在 localStorage 中且在长时间空闲后仍可用于访问受保护资源与聊天功能，页面刷新与导航均不会触发重新认证。影响范围涵盖所有已登录用户以及所有受保护页面与嵌入式聊天能力。该问题显著扩大被他人趁用户离开工位或在共享设备上进行未授权访问的时间窗口，属于高严重度的安全缺陷。

**修复优先级:**
该缺陷直接削弱认证与会话管理控制，可能导致账户被长期冒用、敏感数据暴露，并可能违反企业安全策略/合规要求；影响面为所有登录会话，风险不可接受。

**修复建议:**
在服务端强制实施会话策略：为访问令牌设置较短有效期并校验 exp，结合刷新令牌轮换与失效（含服务端黑名单/会话记录）实现空闲超时与可选绝对超时，超时后统一返回 401/403。前端在收到 401/403 时清理本地 token、提示“会话已过期”并跳转登录，同时确保嵌入式聊天与所有 API 调用遵循同一超时与重新认证流程。

---

### MP-289 🔴 **紧急**

**概述:**
该 Bug 反映系统允许同一账号在多个浏览器/设备上同时登录，但缺少对并发会话的管理与控制能力。当前使用存储在 localStorage 的 JWT 维持会话，且没有面向用户的会话列表、远程登出或“全设备退出”等能力，导致账号被盗用或共享凭证时难以及时止损。若服务端未实现 token 级别的失效/撤销机制，登出后旧 token 仍可能继续访问接口，风险进一步扩大。影响范围覆盖所有账号与所有客户端登录场景，属于安全与风控层面的高影响问题。

**修复优先级:**
这是典型的账号安全控制缺失问题，一旦发生凭证泄露/账号接管，用户无法主动发现和终止异常会话，潜在影响用户面广且后果严重。并发会话与 token 失效策略若不完善，可能导致“已登出仍可访问”的安全事件。

**修复建议:**
在服务端引入“会话/设备”维度的 token 管理（为 refresh/access token 绑定 sessionId，支持撤销与黑名单/版本号机制），并提供“会话管理页”支持查看活跃会话、单个会话登出与全设备登出。同步加强登出语义：登出即服务端立即失效对应 token，并在客户端清理本地 token，同时对新设备/异地登录增加告警与审计日志。 

---

### MP-295 🔴 **紧急**

**概述:**
现有 Azure Cache for Redis 安装后仍使用 access key 进行鉴权，Azure Portal 提示应启用 Microsoft Entra ID 并禁用 access keys。当前方案依赖长期有效的共享密钥（存于配置/Key Vault），带来密钥泄露与难以轮换的安全风险。若直接禁用 access keys，会立即中断所有现有客户端连接，需要维护窗口与客户端改造配合。影响范围取决于连接该 Redis 的应用数量，但对生产环境可用性与安全性都有显著影响。

**修复优先级:**
该问题涉及长期共享密钥的安全风险，且门户已明确给出安全整改建议；一旦发生密钥泄露影响面大。同时整改过程中禁用 access keys 会导致服务中断，需要尽早规划并实施以降低风险与停机不确定性。

**修复建议:**
在 Redis Cache 上启用 Microsoft Entra ID 认证，为相关应用的 Managed Identity 分配所需 RBAC 权限并将客户端改为使用 Entra ID token 连接。完成迁移并验证稳定后，在计划维护窗口内禁用 access keys 以消除共享密钥风险。

---

### MP-313 🔴 **紧急**

**概述:**
该 Bug 的核心问题是：在应用表格筛选条件后，界面没有任何清晰可读的“已启用筛选”提示（如 chips/badges 或计数），导致用户无法确认当前表格处于何种筛选状态。问题在应用内多个带筛选的表格/视图中反复出现，影响范围较广。其直接后果是用户可能基于被筛选后的数据做出错误判断，并在反复打开筛选面板确认状态上浪费时间。由于会影响数据理解与决策准确性，严重程度高（文档标注 Critical）。

**修复优先级:**
该问题跨多个核心表格场景且会导致用户误判数据状态，属于高频可见的可用性缺陷并可能引发业务决策错误，应优先修复以降低广泛影响。

**修复建议:**
在表格上方展示当前生效的筛选条件为可移除的 chips/badges，并在筛选按钮上增加已启用筛选数量的计数提示；同时提供“清除全部筛选”的入口以便快速恢复默认状态。

---

### MP-314 🔴 **紧急**

**概述:**
MP-314 的核心问题是新用户首次登录后应用内没有任何引导（无新手教程、提示气泡或导览），导致用户不知道从哪里开始操作。该问题影响范围覆盖整个应用的首次使用体验，主要影响新注册/首次登录用户。文档标注严重程度为 High，可能直接造成新用户流失、激活率下降和支持咨询增加。当前处于 Backlog 且无人负责，存在长期未处理的风险。

**修复优先级:**
该问题影响所有新用户的关键“首次体验”路径，可能显著降低转化/留存并带来持续的业务损失。虽然不涉及安全风险，但对用户增长与产品可用性影响大，优先级应较高。

**修复建议:**
为新用户增加“Getting Started”入口与首页关键快捷操作，并基于“首次登录/首次关键功能未完成”条件触发轻量引导（可选交互式导览 + 关键区域 tooltip）。同时增加埋点衡量引导曝光与关键任务完成率，用数据迭代引导内容与触发策略。

---

### MP-315 🔴 **紧急**

**概述:**
在首页（Dashboard）点击分类筛选（如 Automobile、Retail 等）后，页面状态发生变化但 URL 未同步更新，导致缺少可深链接的参数。用户无法将当前筛选结果进行书签保存或分享给他人，并且刷新页面会丢失筛选状态。由于 URL 不变，浏览器前进/后退也无法正确回到上一个筛选状态，影响导航体验。该问题覆盖所有使用分类筛选的用户场景，文档标注严重程度为 High。

**修复优先级:**
该问题直接影响核心可用性（分享/书签/回退）并导致刷新即丢状态，影响面广且会显著降低用户对筛选功能的信任与使用效率。虽然不涉及安全风险，但属于高频交互路径上的高影响缺陷，应尽快修复。

**修复建议:**
在筛选变更时使用 History API（pushState/replaceState）将 category 写入查询参数（如 ?mode=default&category=automobile），并在页面加载时读取 URL 参数初始化筛选状态；同时监听 popstate 以支持浏览器后退/前进正确还原筛选。

---

### MP-320 🔴 **紧急**

**概述:**
该 Bug 出现在 Dashboard 的 AI Search/AI Reading 弹窗导航中：打开弹窗后 URL 会带上 mode 参数，但用户使用浏览器返回键时不会回到预期的 Dashboard 上一状态，而是发生错误路由并丢失上下文。当前返回 Dashboard 的唯一明显方式是点击弹窗的 X，导致导航体验不符合用户预期。问题疑似与 mode 参数在浏览器历史（popstate）场景下未被正确处理有关。影响所有使用浏览器返回键进行导航的用户，且会造成流程中断与困惑，严重程度较高。

**修复优先级:**
该问题会在高频入口（Dashboard）上触发，并直接破坏浏览器返回键这一核心导航预期，导致用户迷路或丢失上下文，影响面广且可复现，需尽快修复。

**修复建议:**
为包含 mode 参数的路由补齐 popstate 处理：Back 时移除 mode 并同步关闭弹窗/恢复 Dashboard UI 状态，确保 URL 与界面一致；同时评估在打开/关闭弹窗时改用 history.replaceState（或不改写 URL）以避免污染历史栈并减少异常回退路径。

---

### MP-321 🟢 **可延后**

**概述:**
在首页（Dashboard）的 agents 区域点击“See More”后发生跳转，但未能保留用户已选择的分类筛选（如 Automobile）上下文，导致用户浏览状态丢失。该问题影响从首页进入列表/更多内容页的导航体验，用户需要重新选择筛选条件。严重程度标记为 Medium，主要是可用性与转化/效率损失而非数据错误或安全问题。影响范围集中在使用首页分类筛选并通过“See More”继续浏览的用户路径上。

**修复优先级:**
该问题不会导致数据丢失或安全风险，属于体验/效率问题，且严重程度为 Medium。若“See More”入口使用频繁会带来明显摩擦，但通常可通过用户手动重新选择筛选条件绕过。

**修复建议:**
在“See More”跳转时将当前选中的分类/筛选条件序列化并附加到目标链接的 URL query（或通过路由 state）中，并在目标页初始化时读取并应用这些参数以恢复筛选状态。

---

### MP-322 🟢 **可延后**

**概述:**
该问题是应用内多个搜索输入框的占位符文本过于笼统（如“Search...”或“Please enter”），导致用户不清楚可搜索的字段或范围。影响范围覆盖“Various search inputs across the application”，主要体现在可用性与引导性不足。文档标注严重程度为 Low，属于体验优化类问题，不影响核心功能但会降低搜索效率与清晰度。整体风险较低，更多是产品文案与一致性改进。

**修复优先级:**
问题仅影响 UX 清晰度且严重程度低，不涉及功能错误、数据风险或安全问题。可在常规迭代中统一优化，不需要紧急修复。

**修复建议:**
梳理各搜索框的可搜索字段与业务语境，为每个输入框配置更具体的 placeholder（如“Search by agent name...”/“Search users by name or email...”），并在设计规范中统一占位符文案规则以避免回归。

---

### MP-323 🔴 **紧急**

**概述:**
在 AI Studio → MCP → Create 的创建表单中，必填/非法输入触发的校验提示文案不一致且部分不符合上下文，导致用户难以理解需要修正的内容。部分提示引用了错误对象（将 MCP 说成 agent），以及出现“Please input !”这类含糊且带感叹号的提示，影响专业性与可用性。该问题会直接降低表单可完成率并增加用户试错成本，影响所有使用该创建流程的用户。文档标注严重级别为 Critical，属于明显的体验与转化风险问题。

**修复优先级:**
该问题发生在核心创建流程中，会直接阻碍用户完成表单并造成高频困惑，影响范围广且与“Critical”严重度一致。虽非安全风险，但会显著影响转化/效率，建议尽快修复。

**修复建议:**
统一表单校验文案规范（例如“Please enter/Please select [field name]”），并逐项校对字段上下文，将错误对象从 agent 更正为 MCP。替换“Please input !”等模糊/带感叹号提示为明确的字段级提示（必要时包含格式要求），并在组件层做集中化文案与样式管理以避免再次不一致。

---

### MP-324 🔴 **紧急**

**概述:**
登录页的前端校验将仅包含空格的用户名和密码视为“非空”，从而允许用户提交无效凭据。该问题会绕过客户端必填校验，导致后端收到无意义输入并触发服务器端错误或返回不清晰的提示信息。影响范围覆盖登录入口，可能造成大量无效请求、用户困惑以及潜在的异常日志/告警噪音。文档标注严重程度为 Critical，属于会影响核心登录流程与系统稳定性的高严重问题。

**修复优先级:**
该缺陷发生在登录这一高频关键路径，且可被任何用户轻易触发，导致后端错误与用户无法理解的反馈，影响面大。若后端未做同等防护，还可能带来异常堆栈暴露、日志膨胀或被滥用造成资源消耗的风险。

**修复建议:**
在客户端提交与校验前对用户名/密码进行 trim，并将“trim 后为空”按缺失输入处理，提示一致且友好。同时在服务端也应做 trim 与非空校验（防止绕过前端），并返回明确的 4xx 校验错误而非 5xx。

---

### MP-325 🔴 **紧急**

**概述:**
在“与客服聊天”场景中，当用户点击一个未发布的 agent 时，系统提示“Robot under maintenance”，与实际原因（agent 未发布）不符。该误导性文案会让用户误以为是系统维护故障，而非需要发布配置，导致困惑与错误排查方向。影响范围集中在尝试使用未发布 agent 的用户，属于高严重度的可用性/引导问题。问题不涉及数据损坏或安全，但会显著增加用户流失、工单与支持成本。

**修复优先级:**
该问题会直接阻断用户使用并造成明显误导，影响首次使用与自助排障效率，容易引发大量咨询与负面体验。修复成本低（主要为文案与状态判断映射），但收益高，适合尽快处理。

**修复建议:**
将未发布 agent 的错误码/状态映射到明确提示文案（如“Agent 未发布，请先发布后再使用”），并确保仅在真实维护状态时才显示“under maintenance”。同时补充前端/后端校验与自动化测试覆盖未发布状态的提示分支。

---

### MP-326 🔴 **紧急**

**概述:**
在 App 的 Deep Research 功能入口，首次使用会提示需要先完成配置，但提示信息中没有提供跳转到配置页的按钮或链接，导致用户无法继续使用该功能。该问题会阻断 Deep Research 的首次使用路径，属于功能不可用级别的体验缺陷。影响范围主要是首次使用或尚未配置过 Deep Research 的用户。文档标注 Severity 为 High，严重程度较高。

**修复优先级:**
该问题会直接阻断用户完成必要配置并使用 Deep Research，导致功能无法使用，影响首次使用转化与用户体验，且复现稳定。

**修复建议:**
在提示文案中增加明确的“Configure Now/立即配置”按钮或可点击链接，直接导航到 Deep Research 配置页；同时确保配置完成后可自动返回或刷新当前页面以继续流程。

---

### MP-327 🔴 **紧急**

**概述:**
多个页面在列表为空时仅显示简单的“No Data”提示，缺少原因说明与下一步引导。该空状态设计会让用户不知道如何产生数据或继续操作，导致流程被阻断并增加放弃率。问题出现在 AI Studio 及其他存在空列表的视图，属于跨页面的体验一致性问题。文档标注严重程度为 High，主要影响新用户或首次使用相关功能的用户转化与留存。

**修复优先级:**
该问题会直接阻塞关键任务（无法继续创建/配置），并在多个入口反复出现，显著提升流失风险，影响面较广。

**修复建议:**
为所有空列表视图提供统一的空状态组件：包含“为何为空”的简短解释、明确的下一步 CTA（如“创建你的第一个…”）及可选的帮助链接/示例。对不同页面按业务场景配置文案与跳转目标，并补充埋点以验证 CTA 点击与转化效果。

---

### MP-328 🔴 **紧急**

**概述:**
在未完成/不可用的功能页面中，系统展示了“Feature under development”但没有任何具体信息（如发布时间、计划或可操作入口），看起来像占位符。该问题会让用户无法判断功能是否会推出以及何时推出，从而降低信任感并造成困惑。影响范围覆盖所有“未就绪功能”的入口与视图，属于较广泛的体验问题。文档标注严重程度为 High，主要风险在于用户流失与负面体验，而非功能崩溃或数据安全。

**修复优先级:**
该问题会在用户主动探索功能时频繁触达，直接削弱产品可信度并可能导致用户放弃使用或产生投诉。虽然不涉及安全/数据风险，但对转化与留存影响显著，且修复成本通常较低，适合尽快处理。

**修复建议:**
对所有未完成功能入口进行统一策略：若无明确计划/日期/说明则从导航与入口隐藏或禁用；若需要保留曝光，则补充明确说明（范围、预期时间）并提供 CTA（如“Notify me”、反馈入口或路线图链接）。同时建立文案与组件规范，避免未来再次出现“无信息占位”提示。

---

### MP-329 🟢 **可延后**

**概述:**
该 Bug 的核心问题是多个页面中的 Toast 通知可见性不足且显示时间过短，导致用户难以及时注意到并读完提示信息。影响范围覆盖使用 Toast 反馈的多个视图场景，属于体验与可用性问题。主要影响是用户可能错过关键操作反馈，从而产生困惑、重复操作或误判操作结果。文档标注严重程度为 Low，整体不涉及功能不可用或数据安全风险。

**修复优先级:**
该问题主要影响可用性与反馈感知，通常不会导致核心功能失败或安全/数据风险，且文档标注为低严重度。除非 Toast 承载关键错误/支付/安全类提示导致大量用户误操作，否则不属于必须紧急修复的问题。

**修复建议:**
提升 Toast 的视觉层级与可读性（提高对比度、避免被遮挡、位置更一致），并将默认展示时长延长到可读范围。对于重要提示增加“手动关闭/暂停消失”或在无障碍设置中提供更长时长选项。

---

### MP-330 🔴 **紧急**

**概述:**
在 Admin → Model → Model Set → Add 页面中，表单的 i18n 文案未正确翻译，导致界面显示技术性 key（如 "llms.template.chat_openai.display_name"）而非可读标签。该问题主要影响管理端创建/配置 Model Set 的使用体验与可理解性，容易造成配置错误或误操作。Bug 文档标注严重程度为 High，说明其对核心管理流程的可用性影响较大。影响范围集中在“LLM”相关表单区域 ，但可能暗示更广泛的翻译加载/查找机制问题。

**修复优先级:**
该问题直接影响管理端关键配置流程的可用性与正确性，且在测试中可稳定复现，可能影响所有使用该页面的管理员用户。虽然不是安全漏洞，但会显著降低产品可用性并增加误配置风险，优先级应较高。

**修复建议:**
排查并修复该页面的 i18n key 解析/加载链路（命名空间、资源文件加载时机、fallback 逻辑），确保对应翻译资源存在且被正确引用。为 Model Set 表单相关 key 增加自动化校验/测试（如检测渲染结果是否仍包含原始 key），防止回归。

---

### MP-331 🔴 **紧急**

**概述:**
在 Admin → Identity → Personnel → Edit 的用户编辑表单中，界面语言出现混用：大部分标签为英文，但存在中文标签“继承自组织的角色”。该问题会导致界面本地化不一致，影响管理员在多语言环境下的使用体验与理解一致性。Bug 发生路径明确且可稳定复现，属于高严重度的 UI 本地化缺陷。影响范围主要集中在后台人员管理的编辑用户页面，可能对所有非中文界面语言用户造成困扰。

**修复优先级:**
该问题在核心后台管理流程中可直接触发，且会影响所有使用英文（或其他非中文）UI 的管理员用户，造成理解偏差与专业性/一致性下降。虽然不是安全问题，但属于高严重度的产品质量与可用性缺陷，应尽快修复。

**修复建议:**
检查该标签对应的 i18n key/资源文件，补齐并启用正确的多语言翻译映射，确保在所选 UI 语言下加载对应语言文本而非硬编码中文。补充自动化/回归用例：校验该页面所有 label 均来自 i18n 且在目标语言下无混用。

---

### MP-333 🔴 **紧急**

**概述:**
该 Bug 表现为应用内不同表格与视图中的日期/时间格式不一致（如“2025/12/22 13:39”与“2025-12-22 15:42:27”混用）。这会降低可读性与可预测性，用户在不同页面之间切换时需要反复适应格式差异。影响范围覆盖“Various tables and views”，属于跨页面的一致性问题。文档标注严重程度为 High，但主要影响体验与效率而非功能不可用。

**修复优先级:**
影响范围广且在多个核心列表/视图中持续出现，会显著降低日常使用效率并增加误读风险；修复通常属于统一格式化的工程性改动，适合尽快纳入迭代以避免继续扩散。

**修复建议:**
在前端展示层建立统一的日期格式化工具/组件（或后端统一输出规范），所有表格与详情视图强制复用；同时根据用户 locale/时区配置选择一致的显示格式，并补充自动化测试/快照测试防止回归。

---

### MP-335 🔴 **紧急**

**概述:**
该 Bug 表现为应用内所有较长的弹窗表单中滚动条不可见，导致用户难以感知弹窗内容可继续向上/下滚动。虽然 Cancel/Save 按钮会随滚动保持可见，但用户仍可能遗漏隐藏在可视区域之外的字段或信息。影响范围覆盖所有模态框（编辑/创建等表单），主要造成可用性与表单填写完整性问题。严重程度为中等，可能引发提交信息不完整、反复确认与用户困惑。

**修复优先级:**
影响面广（所有模态框）且会直接导致用户遗漏必填/关键字段，造成业务数据不完整与操作失败的隐性风险。该问题属于明显的可用性缺陷，容易引发持续性用户反馈与支持成本。

**修复建议:**
在模态框内容区域启用可见滚动条（确保不被 CSS 隐藏，如移除/调整 scrollbar-width、::-webkit-scrollbar 或 overflow 相关样式），并保证可访问性与跨浏览器一致。若出于设计需要保留隐藏样式，则增加明确的滚动提示（底部渐变/箭头/“更多内容”提示）或采用 sticky 的区块标题/页脚提示内容长度。

---

### MP-336 🔴 **紧急**

**概述:**
在 375px（如 iPhone SE/X）移动端视口下，首页 Dashboard 布局严重失真，导致页面几乎不可用且功能受限。截图文件极小（约 8.9KB）暗示可能存在内容未渲染、被隐藏或资源/布局计算异常的问题。影响范围集中在移动端用户访问首页的核心路径，直接阻断使用。严重程度标注为 Medium，但从“不可用”描述看对移动端体验影响较大。

**修复优先级:**
该问题会导致手机端用户无法正常使用应用的首页核心功能，属于直接可用性阻断，可能影响所有移动端访问用户并带来较高流失风险。

**修复建议:**
补齐并校验移动端响应式布局：采用 mobile-first 的 CSS 断点（如 375/414/768），排查是否存在在小屏下被错误设置为 display:none/overflow:hidden/固定高度等导致内容消失的样式；同时在真实设备与浏览器 DevTools 中对关键容器的渲染与资源加载进行逐项定位并修正。 

---

### MP-337 🔴 **紧急**

**概述:**
在慢网（3G 模拟）加载首页 Dashboard 时，页面在数秒内保持空白且无任何 skeleton 或 loading 指示，用户无法判断是否正在加载。该问题主要影响首页首屏体验与可感知性能，容易造成用户误以为页面卡死并触发重复刷新/离开。影响范围集中在网络较差或首访缓存未命中的用户场景。严重程度为中等，但对关键入口页面的体验影响明显。

**修复优先级:**
首页是高频入口，慢网下出现“空白无反馈”会显著提高跳出率并引发重复操作，影响面较广。虽非安全或数据正确性问题，但属于关键体验缺陷，建议尽快修复。

**修复建议:**
在 Dashboard 首屏主模块加入骨架屏（按区块占位），并在关键 API 请求期间展示全局或局部 loading 状态（spinner/进度条），确保在首个可渲染内容前至少有占位反馈。可通过统一的 loading state 管理（如请求计数/路由级 pending）避免闪烁并在超时/失败时给出错误提示与重试入口。

---

### MP-338 🟢 **可延后**

**概述:**
该 Bug 表现为应用内多个位置的卡片/列表等区域存在长文本被截断的问题，且没有 tooltip 或展开方式查看完整内容。用户因此无法读取全部描述信息，造成信息缺失与理解偏差。影响范围较广（Dashboard 等多处组件复用场景），但不涉及数据错误或安全问题。整体严重程度为中等，主要影响可用性与信息可达性。

**修复优先级:**
问题影响阅读体验且出现在多个页面，但不阻断核心流程、无数据/安全风险，通常可按 UI/可用性优化排期处理。若该截断文本承载关键决策信息（如功能说明/价格/限制），则应提升优先级。

**修复建议:**
统一文本容器的截断策略（单行 ellipsis 或多行 line-clamp）并提供可访问的完整内容揭示方式（hover/focus tooltip、点击展开/详情页）。同时补充对键盘与移动端的交互支持（focus 触发、长按/点击查看）。

---

### MP-339 🟢 **可延后**

**概述:**
该 Bug 表现为聊天页面的历史记录侧边栏宽度过窄，导致会话列表显示空间不足。主要影响是用户浏览、定位和切换历史对话的效率下降，导航体验变差。问题范围集中在 Chat 页面侧边栏的 UI/布局层面，不涉及数据正确性或功能不可用。文档标注严重程度为 Low，属于体验优化类问题。

**修复优先级:**
该问题主要影响可用性与体验，未导致核心功能不可用，也无安全或数据风险。可在后续迭代中排期优化，而非需要紧急修复。

**修复建议:**
调整侧边栏布局样式（如增加默认宽度、设置合理的 min-width/响应式断点）以保证列表可读性。增加可拖拽调整或展开/收起的交互开关，让用户按需扩展侧边栏空间。

---

### MP-340 🟢 **可延后**

**概述:**
该 Bug 的核心问题是 Dashboard 上的卡片缺少明确的 hover 交互反馈，导致“可点击性”暗示不足。影响范围主要在 Dashboard 的卡片/功能区块，用户在鼠标悬停时无法获得一致的视觉或光标提示。结果是可发现性下降，可能降低点击率或增加用户犹豫与误操作。文档标注严重程度为 Low，属于可用性/一致性问题而非功能性故障。

**修复优先级:**
该问题不影响核心功能与数据安全，主要是交互可用性与体验层面的改进，影响可控且可排入常规迭代优化。

**修复建议:**
为所有 Dashboard 卡片统一增加 hover 样式（例如 cursor: pointer、轻微背景/边框/阴影变化，并确保对比度与动效一致）。同时补充键盘 focus-visible 状态以保证可访问性与一致的可交互提示。

---

### MP-350 🔴 **紧急**

**概述:**
在“Chat with an agent”场景中，用户点击未发布的 Agent 会收到“Robot under maintenance/未发布请先发布”的提示，但页面上没有可见的“Publish”按钮或明确指引，导致用户无法继续使用 Agent。该问题直接阻断核心主流程（创建并使用 Agent），对所有创建了未发布 Agent 的用户都有影响。文档标注 Severity 为 Critical，属于功能不可用级别的问题。错误文案还可能造成误导（看起来像系统维护而非未发布状态）。

**修复优先级:**
该问题会导致用户无法使用自己创建的 Agent，属于关键路径阻断，影响转化与留存，且触发条件常见（新建后未发布）。同时错误提示与实际操作入口不一致，显著增加用户困惑和工单量。

**修复建议:**
在提示区域提供明确可点击的“Publish”主按钮（并确保权限与状态校验），或自动跳转到 Agent 编辑/发布页面并高亮发布入口；同时优化文案，区分“未发布”与“维护”两类状态并给出一步到位的操作指引。

---

### MP-351 🔴 **紧急**

**概述:**
在所有包含下拉框的表单中，用户按下 Escape 本应仅关闭下拉框，但实际会关闭整个表单弹窗（modal）。这会导致用户已填写但未保存的数据被直接丢失，属于高影响的交互/可用性缺陷。问题可稳定复现，且覆盖范围广（所有带下拉框的表单）。由于会造成数据丢失，严重程度高（文档标记为 Critical）。

**修复优先级:**
该问题会在常见操作（按 Escape 关闭下拉框）下直接导致用户输入数据丢失，影响面覆盖所有相关表单，用户体验与业务转化风险高，因此需要尽快修复。

**修复建议:**
调整键盘事件处理与冒泡/捕获逻辑：当下拉框处于打开状态时优先消费 Escape 事件并仅关闭下拉框，阻止事件继续触发 modal 的关闭；仅在无可关闭的子组件时才允许 Escape 关闭 modal。同时为存在未保存更改的 modal 增加关闭确认提示（包括 Escape 触发的关闭）。

---

### MP-352 🔴 **紧急**

**概述:**
当用户访问 /agent-basic/invalid-uuid-format 这类无效 UUID 的 Agent 页面时，系统未正确识别“资源不存在/参数非法”，而是继续尝试加载页面，导致只渲染出部分页面且没有明确错误提示。该问题会让 UI 进入不稳定状态，用户难以判断发生了什么并可能继续误操作。影响范围主要在 Agent 详情页路由的异常输入/非法参数场景，但任何通过手动输入、外部链接或错误分享链接进入的用户都可能遇到。文档标注 Severity 为 High，属于高严重度的错误处理缺失与用户体验/稳定性问题。

**修复优先级:**
该问题会造成页面不完整渲染和不稳定 UI 状态，直接影响用户操作与信任度，且通过任意错误链接即可触发，出现概率不低。虽然看起来不是安全漏洞，但属于高严重度的错误处理缺陷，建议尽快修复以避免持续的用户困惑与潜在连锁错误。

**修复建议:**
在路由进入与 API 调用前增加 UUID 格式校验（前端/后端均可），无效则直接返回 400/404 并在前端展示“Agent not found”等友好错误页或 toast。对后端返回的 404/400 统一做错误边界处理：停止渲染主体内容、显示明确错误信息，并可选择重定向到 agents 列表页附带通知。 

---

### MP-353 🔴 **紧急**

**概述:**
在 Chat 侧边栏的会话历史中，点击“+”(New Chat) 后会出现多个重复的空“New Chat”条目。该问题会导致会话列表被空条目污染，影响用户查找与切换对话的效率，并可能让用户误以为创建了多个有效会话。Bug 发生在核心入口操作（新建会话）上，影响范围广且可重复触发。文档标注严重程度为 High，属于明显的可用性与数据一致性问题。

**修复优先级:**
该问题位于高频操作路径（新建聊天），容易被大量用户触发并持续累积造成历史列表混乱。虽然不涉及安全风险，但会显著影响导航体验与对会话状态的理解，优先级应较高。

**修复建议:**
对“+”按钮点击进行防抖/节流或在创建会话请求期间禁用按钮，并在前端/后端保证创建会话接口幂等（相同上下文只生成一个会话）。UI 层在检测到已有未命名/空会话时直接切换到该会话而不是插入新条目，并在渲染时去重以避免重复展示。

---

### MP-355 🟢 **可延后**

**概述:**
该 Bug 表现为后台多个列表页面的分页组件只显示“1-10 of 68 items”，但缺少“第 X 页/共 Y 页”的页码总量信息。问题影响 Admin → Identity → Personnel 及类似长列表页面，会降低用户在多页数据中的定位与跳转效率。严重程度为中等，主要是可用性/体验问题，不涉及数据错误或功能不可用。对需要频繁浏览长名单的管理员用户影响更明显。

**修复优先级:**
这是信息展示缺失导致的导航体验问题，不会造成数据丢失、权限/安全风险或核心流程阻断，可作为常规体验优化排期处理。

**修复建议:**
在分页组件中基于 totalItems 与 pageSize 计算 totalPages，并展示“Page X of Y”（同时确保在筛选/搜索后总页数实时更新）。如支持快速跳页，可同步提供页码输入/跳转控件以进一步提升长列表导航效率。

---

### MP-356 🔴 **紧急**

**概述:**
该 Bug 表现为在 Chat 中选择某个 agent 后，打开会话历史/会话列表时并不会按当前选中 agent 进行过滤，导致不同 agent 的会话混在一起。其直接影响是用户难以快速定位目标会话，降低检索效率。更严重的潜在影响是用户可能误进入/续聊到错误 agent 的会话，从而产生操作失误。整体严重程度为中等，影响范围覆盖所有依赖会话历史进行检索与续聊的用户场景。

**修复优先级:**
该问题会在高频路径（选 agent 后查历史并续聊）中持续出现，显著增加误操作风险并影响工作效率，且影响面较广（所有多 agent 用户）。虽非安全漏洞，但会直接导致用户会话选择错误，建议尽快修复。

**修复建议:**
在会话历史查询与列表展示层增加按“当前选中 agent”的默认过滤条件，并在列表头部显示当前过滤的 agent 标识（支持切换“全部 agents/当前 agent”）。同时确保切换 agent 时刷新/重置会话列表的数据源与缓存，避免混合展示。

---

### MP-357 🔴 **紧急**

**概述:**
该 Bug 的核心问题是多个可交互元素在键盘聚焦时没有可见的 focus 样式，导致用户无法确认当前焦点位置。受影响范围覆盖首页 Agent 卡片、分类筛选按钮、侧边栏菜单项以及各类功能卡片等关键入口。该问题直接破坏键盘可用性，可能使键盘用户的导航变得困难甚至不可用。并且违反 WCAG 2.1 AA 的 2.4.7（Focus Visible），属于无障碍合规性高风险问题。

**修复优先级:**
影响所有依赖键盘导航的用户（含无障碍用户），可能导致核心流程不可用且存在合规风险（WCAG 2.1 AA 失败），优先级应视为高。

**修复建议:**
为全站可交互元素补齐一致的 focus 可视化样式，优先使用 :focus-visible（如统一 outline/offset），并排查是否有 CSS 重置/组件样式将 outline: none 移除导致失效；对自定义组件确保聚焦落点在可聚焦元素上。

---

### MP-358 🔴 **紧急**

**概述:**
应用内几乎所有仅图标按钮缺少可访问名称（如 aria-label），导致屏幕阅读器无法朗读按钮用途。该问题覆盖范围极广，涉及头部、登录页、侧边栏、表单、分页、弹窗及各类工具栏等关键交互区域。结果是盲人和低视力用户难以或无法完成核心操作，属于严重可用性与合规性缺陷。该问题违反 WCAG 2.1 AA 4.1.2（Name, Role, Value），对无障碍合规与用户体验影响重大。

**修复优先级:**
该缺陷使大量关键功能对依赖屏幕阅读器的用户不可用，影响面覆盖“全应用”。同时存在明确的 WCAG 2.1 AA 合规风险，可能影响上线、验收或引发投诉。

**修复建议:**
对所有 icon-only 按钮进行全量审计，统一为每个按钮提供稳定的可访问名称（优先使用 aria-label 或 aria-labelledby；若有可见文本则确保可被辅助技术读取）。在组件库层面封装 IconButton（强制 label 入参）并加入自动化无障碍测试/CI 规则，防止回归。

---

### MP-359 🔴 **紧急**

**概述:**
该 Bug 的核心问题是应用内大量图片缺失或使用不恰当的 alt 文本，导致屏幕阅读器无法获取图片的功能/内容信息。影响范围覆盖几乎全站的多类元素（头像、功能卡片图标、Logo、卡片插图、空状态插图、导航图标等），属于系统性无障碍缺陷。该问题违反 WCAG 2.1 Level A 的 1.1.1（Non-text Content）基础要求，使盲人/低视力用户在关键导航与功能理解上受阻。严重程度高，可能造成合规风险与用户可用性大幅下降。

**修复优先级:**
这是 WCAG Level A 的基础合规项且影响“全应用多数图片”，会直接阻断依赖屏幕阅读器的用户完成核心操作，并带来显著的合规/审计风险。

**修复建议:**
对全站图片做一次系统性审计并分类处理：信息/功能性图片补充准确、简洁且描述“用途/目的”的 alt；纯装饰图片统一使用 alt="" 并配合 aria-hidden="true"/role="presentation"。同时在组件库/设计规范中固化规则（如 Avatar/Icon/Image 组件强制传入 alt 或显式标记 decorative），并加入自动化无障碍检查防止回归。

---

### MP-360 🔴 **紧急**

**概述:**
该 Bug 的核心问题是应用内多处文本/图标与背景的颜色对比度不足，未满足 WCAG 2.1 AA（1.4.3 Contrast Minimum）要求，导致可读性下降。受影响范围较广，涵盖禁用按钮、徽章、表单校验错误信息、输入框占位符、以及各类标签/帮助文本等多个常见 UI 元素与状态。对低视力用户影响尤为明显，也可能带来合规与可用性风险。整体严重程度较高，因为问题遍布全应用且涉及关键流程（如登录与表单校验）。

**修复优先级:**
该问题属于无障碍合规缺陷且覆盖面广，影响大量用户在核心交互（登录、表单填写、分页等）中的可读性与可用性，存在合规/审计风险，因此应尽快修复。

**修复建议:**
对全应用所有状态（disabled/error/placeholder/labels 等）进行对比度审计并建立统一的设计 token/调色板，确保普通文本≥4.5:1、大号文本≥3:1。按组件逐一替换不达标颜色（例如将错误红加深、占位符改为更深灰），并用 WebAIM Contrast Checker/自动化可访问性测试在 CI 中校验。

---

### MP-361 🔴 **紧急**

**概述:**
该 Bug 的核心问题是多个表单输入框缺少可见且与控件程序化关联的 <label>，仅依赖 placeholder 作为字段标识。用户在输入后 placeholder 消失，导致表单可用性下降，并使屏幕阅读器难以正确识别字段用途。影响范围较广，包含登录页用户名/密码、多个业务表单及全局搜索等多处输入框。该问题直接违反 WCAG 2.1 AA（1.3.1、3.3.2），属于高优先级的可访问性合规风险。

**修复优先级:**
影响多个关键路径与大量页面，且对屏幕阅读器用户与认知障碍用户造成直接阻碍，并带来 WCAG 2.1 AA 合规风险，优先级应较高需尽快修复。

**修复建议:**
为所有输入框补充可见的 <label> 并通过 for/id 进行程序化关联；如因 UI 设计不便显示，可使用 visually-hidden（如 sr-only）标签并确保必要时补充 aria-label/aria-labelledby，同时保留 placeholder 仅作为示例提示而非唯一标识。

---

### MP-362 🔴 **紧急**

**概述:**
该 Bug 的核心问题是页面缺少“Skip to main content（跳到主要内容）”跳转链接，导致无法提供有效的“绕过区块”机制。受影响人群主要是键盘用户和屏幕阅读器用户，他们每次进入页面都必须逐个 Tab 穿过完整导航才能到达主要内容。该问题违反 WCAG 2.4.1（Bypass Blocks），属于可访问性合规缺陷。严重程度中等，但会显著降低无障碍体验并带来合规风险。

**修复优先级:**
该问题影响所有依赖键盘/辅助技术的用户的核心导航效率，并涉及 WCAG 合规，可能带来审计/投诉风险。修复成本低且收益高，适合尽快处理。

**修复建议:**
在页面最顶部（body 开头）添加可聚焦的“Skip to main content”链接，指向主内容容器的 id（如 #main-content），并确保该容器存在且链接在获得焦点时可见。同步补充 CSS（如 .skip-link:focus）以保证键盘用户可发现并使用该链接。 

---

### MP-363 🟢 **可延后**

**概述:**
该 Bug 的核心问题是页面缺少明确的语义化地标（header/nav/main/footer），导致页面结构语义不清。其直接影响是屏幕阅读器用户无法通过地标快速跳转与定位内容，降低可访问性与导航效率。影响范围通常覆盖所有使用辅助技术访问该页面的用户，并可能导致无障碍合规风险。严重程度偏中等：不一定阻断核心功能，但会显著影响可用性与合规性。

**修复优先级:**
该问题主要影响无障碍体验与合规性，通常不造成业务功能不可用或安全风险，因此不属于最高紧急级别。但若产品有无障碍合规要求或面向公共/政企用户，优先级应上调并尽快处理。

**修复建议:**
为页面补齐语义化结构并确保每页仅一个 main：使用 header/nav/main/footer 等语义标签（或添加对应 ARIA landmark role）并为主内容提供可跳转锚点（如 id="main-content"）。同时检查组件化布局中是否存在重复/嵌套地标、错误 role 或缺失跳转链接（skip link），并用屏幕阅读器与无障碍扫描工具回归验证。

---

### MP-364 🟢 **可延后**

**概述:**
在 Sensitive Words 设置区域的开关（switch）控件标签包含了图标文本“question-circle”，导致标签语义不清晰。屏幕阅读器可能会把该图标文本当作可读内容读出，从而让用户难以理解该开关的真实含义。该问题主要影响依赖辅助技术的用户，属于可访问性（Name/Role/Value 与表单标签）缺陷。整体严重程度中等，但会直接降低无障碍可用性与合规性。

**修复优先级:**
问题主要影响无障碍体验与合规性，但不涉及数据安全、功能不可用或大面积用户阻断。建议纳入近期迭代修复以降低无障碍风险。

**修复建议:**
将开关的可访问名称与帮助图标分离：为 switch 提供清晰的 label（label for / aria-labelledby），并为帮助按钮单独设置 aria-label（如“More information”），避免图标类名/文本进入可读标签内容。确保最终无障碍名称只包含“Enable System-Level Sensitive Words”等业务语义文本。

---

### MP-366 🟢 **可延后**

**概述:**
该 Bug 指出当前输入框的默认焦点环（focus ring）对比度可能不足，导致键盘/辅助技术用户难以识别焦点位置。影响范围主要在所有可聚焦输入控件的焦点状态呈现，属于无障碍与可用性问题。问题会降低导航效率并可能导致用户误操作，但不涉及数据错误或安全风险。整体严重程度偏中低，但在重视无障碍合规的场景下影响会被放大。

**修复优先级:**
该问题主要影响无障碍体验与合规风险，通常不会阻断核心功能或导致安全/数据问题；文档标注优先级为 Low，且未提供大面积用户受影响或线上事故信息。

**修复建议:**
为所有可聚焦元素实现统一的高对比度自定义 focus 样式（如加粗外描边/双层描边），并确保与背景达到可接受的对比度要求；同时在不同主题/背景（浅色、深色、高对比模式）下回归验证。

---

### MP-367 🔴 **紧急**

**概述:**
MP-367 的核心问题是 AKS 中 mcpm 与 translator 两个工作负载的容器规格未设置 memory limits，导致单个容器可无上限占用节点内存。该缺陷会引发节点内存压力，造成 Pod 被驱逐（evictions），并可能连带终止与该服务无关的其他 Pod。影响范围覆盖运行这些工作负载的所有集群节点，表现为稳定性下降与故障扩散风险上升。严重程度偏高，主要体现在集群可靠性与可用性风险，而非功能性错误。

**修复优先级:**
缺少内存上限会在内存泄漏或突发流量时迅速触发节点级内存压力，导致大范围 Pod 驱逐和级联故障，影响面可能扩大到整个节点/集群的其他服务。

**修复建议:**
在 mcpm 与 translator 的容器 spec 中补齐 resources.limits.memory，并结合历史监控数据设置合理的 request/limit（例如 limit 为 request 的 1.3–1.7 倍）。同时通过压测与告警（节点内存压力、OOMKilled、驱逐事件）验证与持续校准配置。

---

### MP-368 🔴 **紧急**

**概述:**
该 Bug 的核心问题是 translator 在 AKS 中虽然默认缩容为 0，但一旦启用就会以 1000m CPU/10Gi 内存的高资源 request 启动，属于不安全的默认配置。其影响在于单个 Pod 可能迫使调度器选择更大规格节点或触发集群扩容，从而改变整体集群容量规划。可能带来不必要的成本上升，并在没有合适节点时造成调度失败。严重程度中到高，主要体现在成本与可用性风险，而非直接安全漏洞。

**修复优先级:**
该问题在启用 translator 时会立即影响调度与集群扩缩容决策，可能导致集群被动扩容、成本显著增加或出现 Pod 无法调度的可用性事故，影响面可扩展到整个集群。

**修复建议:**
将 translator 的默认 CPU/内存 requests 下调到合理的最小基线，并通过 HPA/VPA 或按需配置来满足峰值需求；如确需高资源，建议将其隔离到专用 node pool 并配合 taints/tolerations/affinity 限定调度范围。

---

### MP-369 🔴 **紧急**

**概述:**
AKS 的 node pool 由 VM Scale Set 支撑，但仅配置了单实例且未启用任何自动伸缩规则，同时 AKS 资源层面的 autoscaling 也被禁用。该配置虽可运行，但无法提供预期的弹性伸缩能力，并导致在负载上升时需要人工扩容。单节点还带来明显的单点故障风险，降低可用性与容灾能力。整体影响到集群的可扩展性与稳定性，严重程度中到高，尤其在生产与有峰值流量场景下更突出。

**修复优先级:**
当前单节点且无自动伸缩会在负载波动或节点故障时直接造成容量不足或服务不可用风险，需要人工介入才能恢复/扩容。若用于生产或关键业务，影响面广且风险高，应尽快修复。

**修复建议:**
启用 AKS Cluster Autoscaler，并为每个 node pool 配置合理的 min/max 节点数与扩容策略；将单个大规格实例调整为多实例基线（至少 2-3 个节点）并按需自动扩缩，以提升可用性与弹性。

---

### MP-370 🟢 **可延后**

**概述:**
该问题是 Azure PostgreSQL Flexible Server 的存储性能层级配置不匹配：32GiB Premium SSD 盘却设置为 P20（2300 IOPS），而门户建议为 P4（120 IOPS）。这会导致明显的资源过度配置，从而产生不必要的月度成本开销（约 66.24 美元）。对大多数非持续 I/O 受限的工作负载而言，高 IOPS 可能并不会带来可观性能收益。严重性主要体现在成本浪费与可能掩盖真实性能瓶颈，功能可用性风险相对较低。

**修复优先级:**
该问题不直接影响服务可用性或数据安全，主要是成本与优化治理问题，可按变更窗口推进。若当前成本压力较大或环境规模较多，可适当提升优先级以尽快止损。

**修复建议:**
将存储性能层从 P20 下调至门户推荐的 P4，并在变更后重点监控 disk_iops_consumed_percentage、disk_queue_depth 与峰值时段查询延迟。若出现持续 I/O 饱和，再结合索引/查询与参数调优后按需逐级上调性能层。

---

### MP-371 🔴 **紧急**

**概述:**
MP-371 的核心问题是 init-pv-files Job 在 Pod 环境变量中硬编码了数据库与应用超级用户凭据（DB_USER/DB_PASSWD/SERVICEME_SUPERUSER_PWD）。任何拥有集群读取权限或能访问 IaC/清单仓库的人都可能获取这些敏感信息，并且凭据还可能通过日志、崩溃转储或误配置进一步泄露。影响范围覆盖该 Job 及其所访问的数据库与应用超级用户账户，一旦被滥用可导致未授权访问、数据篡改与权限提升。该问题属于高严重度安全漏洞，并会直接破坏合规要求（如 SOC2/ISO27001 的秘密管理实践）。

**修复优先级:**
这是明文凭据暴露问题，泄露门槛低且一旦被获取可直接登录数据库/超级用户账户，造成高影响的安全事件与合规风险。凭据已写入清单/环境变量，存在被多人或系统日志间接扩散的可能，需要尽快止血并轮换。

**修复建议:**
将所有凭据迁移到 Azure Key Vault，并通过 Secrets Store CSI Driver（或 Kubernetes Secret 的 envFrom/secretKeyRef）注入，禁止在 manifests/ConfigMaps 中存放明文。迁移完成后立即轮换数据库与超级用户密码，并同时收敛超级用户权限/改用最小权限账号。

---

### MP-373 🔴 **紧急**

**概述:**
该 Bug 的核心问题是在 AKS 的 serviceme 命名空间内未定义任何 NetworkPolicy，导致 Pod 之间默认无限制互通。受影响的服务包括 backend、celery、frontend、knowledge、mcpm、translator，属于整命名空间范围的安全配置缺失。该问题会在任一 Pod 被攻陷时放大横向移动风险，并阻碍零信任/最小权限的网络分段落地。严重程度偏高，属于安全基线缺失类问题。

**修复优先级:**
该缺陷直接扩大被入侵后的横向移动面，影响整个命名空间内多个核心服务，属于高风险安全暴露，应尽快收敛通信面并建立默认隔离基线。

**修复建议:**
先在命名空间落地默认 deny-all 的 NetworkPolicy 作为基线（分别覆盖 ingress/egress），再为每个服务按需添加 allow-list 规则，仅放通必要的服务间调用与到外部依赖（如 DB、Key Vault、ACR、DNS/出网代理等）的流量，并通过连通性测试与逐步灰度发布避免误拦截。

---

### MP-374 🔴 **紧急**

**概述:**
该 Bug 的核心问题是多个服务的容器未配置必要的 securityContext 加固项（如以非 root 运行、只读根文件系统、禁止提权、默认 seccomp、丢弃 Linux capabilities）。影响范围覆盖 backend、celery、frontend、knowledge、mcpm、init-pv-files 等多个关键工作负载，属于平台级通用安全缺陷。一旦容器被攻破，攻击者更容易进行权限提升或利用可写根文件系统扩大破坏面。整体严重程度偏高，属于应尽快处理的安全加固类问题。

**修复优先级:**
该问题直接增加容器被攻破后的提权与横向移动风险，且影响多个核心服务，风险面广。属于安全基线缺失，修复通常不依赖业务逻辑改动，应优先纳入近期迭代。

**修复建议:**
为每个容器补齐并统一 securityContext：runAsNonRoot、allowPrivilegeEscalation=false、readOnlyRootFilesystem=true、seccompProfile=RuntimeDefault、capabilities.drop=["ALL"]。如个别容器确需特权能力或可写路径，则按最小权限原则逐项回加 capability，并通过挂载可写 volume（而非放开 rootfs）满足写入需求。

---

### MP-375 🔴 **紧急**

**概述:**
该 Bug 的核心问题是 translator 服务部署使用了镜像浮动标签 latest，导致每次部署可能拉取不同的镜像版本，从而产生不可预测、不可复现的部署结果。影响范围主要在 translator 的部署流水线、运行环境一致性、审计与回滚能力。该问题可能引入未经验证的功能变更或安全漏洞，且会显著增加问题排查与合规审计难度。整体严重程度偏高，属于供应链/发布治理类风险。

**修复优先级:**
latest 会在不显式变更配置的情况下引入新镜像，可能导致生产环境无意中上线未测试代码或包含新漏洞的版本，影响面广且难以审计与回滚。

**修复建议:**
将部署镜像从 :latest 改为不可变的版本标签或 digest（如 :4.1.0-build.X 或 @sha256:...），并在集群侧通过准入控制/策略（如 OPA Gatekeeper、Kyverno 或 Azure Policy）禁止使用 latest 等浮动标签。 

---

### MP-376 🔴 **紧急**

**概述:**
该 Bug 的核心问题是 backend 服务的 readiness probe 配置过于激进（periodSeconds=1、timeoutSeconds=1，且使用 TCP socket），在正常运行抖动下容易误判不健康并产生探针抖动（flapping）。这会导致实例频繁被标记为不可用、触发端点频繁变更（endpoint churn），在流量高峰或短暂停顿（如 GC、I/O）时放大不稳定性。影响范围主要在 backend 服务的可用性与流量路由稳定性层面，可能引发间歇性请求失败或延迟升高。严重程度中等偏高，尤其在高负载场景下更明显。

**修复优先级:**
该问题会在正常抖动或短暂停顿时触发实例频繁上下线，造成流量路由不稳定并可能影响用户请求成功率；在峰值期间风险更高且容易扩大影响面。

**修复建议:**
将 readiness probe 的 periodSeconds 提升至 10–15s、timeoutSeconds 提升至 2–5s，并结合失败阈值/成功阈值做适度容错以减少抖动。优先考虑改用 HTTP readiness endpoint（包含关键依赖检查）替代 TCP 探测，以获得更准确的就绪判定。

---

### MP-381 🔴 **紧急**

**概述:**
当应用 UI 语言设置为英文时，嵌入式聊天机器人在用户发送特定畸形 JSON 输入后返回了中文的安全警告信息，导致提示语言与界面语言不一致。该问题主要影响英文用户对错误/安全提示的理解，属于本地化与用户体验缺陷。由于提示内容涉及“信息安全敏感内容”拦截，语言不一致还会造成安全沟通失败与误解风险。问题可能源于聊天/安全过滤模块或 LLM 提供方的默认语言/回退语言配置不正确。

**修复优先级:**
该提示属于安全相关告警，英文用户无法理解会导致忽视或误操作，存在安全沟通与合规一致性风险；且在常见输入异常场景即可触发，影响面较广。

**修复建议:**
统一错误与安全拦截提示的 i18n 机制：在服务端根据用户/会话 locale（或 UI language）选择对应语言的固定文案，禁止由模型自由生成告警文本，并为缺失翻译时提供英文回退。检查并修正安全过滤/LLM provider 的 locale 传递与默认语言配置，增加自动化测试覆盖“UI=English 时所有错误/拦截提示必须为 English”。

---

### MP-393 🔴 **紧急**

**概述:**
该 Bug 的核心问题是应用的 Content Security Policy（CSP）在 script-src 与 style-src 中启用了 'unsafe-inline'，并在 script-src 中启用了 'unsafe-eval'，导致 CSP 无法有效阻止内联脚本、事件处理器以及 eval 类动态执行代码。这样一来，一旦出现任何 XSS 或注入点（尤其是涉及聊天机器人等用户输入场景），攻击者更容易在浏览器端执行任意 JavaScript。影响范围覆盖所有返回该 CSP 头的主 UI 与相关 API 响应，属于全站级安全配置问题。严重程度偏高，因为它削弱了对 XSS 的关键防线，可能导致账号劫持、数据窃取与会话滥用等后果。

**修复优先级:**
这是安全加固缺陷，会显著降低对 XSS/注入的缓解能力，且影响面为全站/全用户；若存在任意注入入口，风险可直接转化为可利用漏洞。对外网可访问的应用与包含用户输入（聊天机器人）的页面应优先处理以降低被攻击窗口期。

**修复建议:**
逐步移除 script-src 中的 'unsafe-inline' 与 'unsafe-eval'：将内联脚本改为外部脚本或使用 CSP nonce/hash 白名单，并清理代码中的 eval/new Function 等动态执行后再删除 'unsafe-eval'。同时将 style-src 的内联样式迁移到样式表或对必要内联样式使用 hash，并在测试/灰度环境迭代验证后发布。

---

### MP-394 🔴 **紧急**

**概述:**
该 Bug 的核心问题是推荐后端服务的资源 requests/limits 配置严重偏高（CPU request 1000m vs 实际约 2m，内存 request 3GiB vs 实际约 1.5GiB），导致 Kubernetes 过度预留资源。过度预留会降低集群 bin-packing 效率与 pod 密度，可能触发不必要的节点扩容并增加成本。由于资源被“占位”，在流量突增时更容易出现 pod pending，影响可用性与弹性。整体属于成本与容量风险类问题，严重度中等偏高，取决于集群负载与扩容频率。

**修复优先级:**
该问题会持续造成资源浪费与成本上升，并在突发负载时提高调度失败（pending）风险，可能影响线上稳定性与扩容效率。若该服务实例数较多或集群资源紧张，影响面会被放大。

**修复建议:**
将 CPU request 下调至约 100m、内存 request 调整为 1.5GiB、内存 limit 设为 3GiB，并基于 CPU 使用率（相对 request）启用 HPA，设置合理的 min/max replicas。发布前后用监控验证 P95/P99 资源使用与 OOM/CPU throttling 情况，必要时小步调整参数。 

---

### MP-395 🟢 **可延后**

**概述:**
该问题是 Celery 服务的单 Pod 资源 request/limit 配置明显偏大（请求 1000m/8GiB，实际仅约 6m/2.6GiB），导致调度器为 Pod 预留过多资源。结果是节点利用率下降、可选节点范围被限制，并可能触发不必要的集群扩容。影响主要体现在成本与容量效率上，而非功能正确性或安全性。严重程度中等：会持续带来资源浪费与扩容风险，但通常不会直接导致服务不可用。

**修复优先级:**
这是成本与资源效率问题，短期不一定造成用户可感知故障或安全风险；但会持续增加资源浪费并提高不必要扩容概率，建议纳入近期容量优化计划。

**修复建议:**
将资源配置下调至更贴近观测值（CPU request 100–200m、内存 request 2–4GiB、limit 6GiB），并通过增加副本数/启用 HPA（必要时 KEDA）进行水平扩展；上线前用压测与监控验证吞吐与延迟，逐步调整 request/limit 以避免 OOM 或限流。

---

### MP-396 🔴 **紧急**

**概述:**
该 Bug 的核心问题是 Recommendation 前端服务的 Kubernetes 资源 requests 设置过高（CPU 500m、内存 500Mi），而实际观测使用量仅约 1m CPU、9Mi 内存，导致大量空闲资源被无谓预留。影响范围主要在集群层面的资源利用率与调度效率，表现为浪费容量与降低 Pod 密度。该问题不会直接导致功能错误或数据风险，但会显著增加集群成本并挤压其他工作负载的可用资源。严重程度属于中高（成本与容量层面），尤其在集群资源紧张或规模较大时更突出。

**修复优先级:**
当前 requests 与实际用量差距极大，会持续造成资源浪费并降低集群可调度余量，可能影响其他服务扩容与稳定性。若集群接近容量上限，该问题会放大排队/调度失败风险，因此应尽快调整。

**修复建议:**
将该服务的 CPU request 下调至 25–50m、内存 request 下调至 128–256Mi，并设置内存 limit 为 256–512Mi（按压测与峰值校准）。如 CPU 使用确实随负载线性增长，再补充配置 HPA 并以合适的指标与阈值进行自动扩缩容。

---

### MP-397 🟢 **可延后**

**概述:**
该问题是 Knowledge service 的 Kubernetes 资源 requests 配置明显高于实际使用（CPU 1000m vs ~1m，内存 3GiB vs ~235Mi）。过度预留会降低集群调度灵活性，导致节点资源压力上升并增加成本。问题不直接影响功能正确性，但会影响集群资源利用率与容量规划。严重程度偏中等，主要体现在成本与可扩展性风险。

**修复优先级:**
该问题属于资源配置优化，不是功能故障或安全问题，通常不会立即影响终端用户体验。除非当前集群已出现资源紧张/频繁扩容导致成本或调度失败，否则可按计划优化。

**修复建议:**
将 requests 下调至更贴近观测值（如 CPU 100m、内存 512Mi–1GiB），并保留合理 limits（CPU 2000m、内存 1–2GiB）以应对峰值。必要时增加基于 CPU 或业务指标的 HPA，并在调整后持续观察一段时间的峰值与 P95/P99 用量再微调。

---

### MP-398 🔴 **紧急**

**概述:**
MCPM recommendation 服务当前只设置了较低的 CPU/内存 request（约 100m/500Mi），但未配置 memory limit。缺少内存上限会导致在内存泄漏或流量/数据异常时发生无界内存增长，进而触发 OOM 或挤压同节点其他 Pod 的资源。影响范围主要在运行该服务的 Kubernetes 节点层面，可能造成节点不稳定、服务重启或连带影响其他工作负载。严重程度偏高，属于典型的资源治理/稳定性隐患问题。

**修复优先级:**
无 memory limit 会在异常情况下放大风险，可能导致节点级资源耗尽并影响同节点多个服务，属于高影响的稳定性问题。修复成本低且收益明确，应尽快纳入变更。

**修复建议:**
为该服务在资源配置中补齐 memory limit（建议 512Mi–1Gi），并将 request 调整到更合理的区间（CPU 20–50m、内存 128–256Mi）。同时结合监控/告警观察实际峰值，必要时再迭代限额与 request。

---

### MP-399 🔴 **紧急**

**概述:**
该问题的核心是当前未为两个资源组（AKS RG 与 non-AKS RG）配置任何成本预算与告警阈值，导致成本管理缺乏前置控制。影响范围覆盖这两个 RG 下的所有资源与费用，无法在支出偏离基线时及时预警。结果是成本异常只能在账单后期或超支后才被发现，可能造成不可控的费用增长。该问题属于治理与运营风险，严重程度中到高，取决于当前费用规模与波动性。

**修复优先级:**
缺少预算与告警会直接导致超支无法被及时发现与阻断，尤其在 AKS 等弹性资源场景中风险更高；一旦发生异常增长，影响金额可能快速扩大。

**修复建议:**
按资源组分别创建月度预算，以当前费用基线为初始预算并设置 50%/75%/100% 阈值告警；同时明确预算 Owner 并配置默认通知渠道（邮件/IM/工单）以确保告警可达与可追责。

---

### MP-400 🔴 **紧急**

**概述:**
该问题是成本管理中未配置与预算阈值关联的成本告警，导致默认情况下没有任何支出临界点提醒。影响范围主要是未自行配置告警的客户/资源组，可能在账单产生后才发现超支或接近超支。该缺陷会降低成本可见性与治理能力，可能引发意外费用与客户投诉。严重程度中等偏高，取决于客户预算敏感度与使用规模。

**修复优先级:**
该问题可能导致客户无法及时发现支出异常或接近预算上限，带来直接的财务风险与信任风险；且影响面可能覆盖所有未手动配置告警的租户/资源组。

**修复建议:**
在成本管理中为每个资源组/预算默认创建50%/75%/100%阈值的邮件告警，发送给RG Owner及默认通知通道，并将告警设置为信息型不触发自动化动作。补充开关/策略以允许客户自定义或禁用默认告警，并确保新建预算/资源组时自动继承。

---

### MP-401 🔴 **紧急**

**概述:**
该问题是在初始安装时未为两个资源组（RG）启用成本异常检测，导致成本异常无法被及时发现。影响范围主要在成本管理与告警通知链路，可能使账单周期内的异常支出在较晚阶段才暴露。严重程度中等偏高，主要风险是财务损失扩大与成本治理失效，但不直接涉及功能不可用或安全漏洞。该问题属于配置/默认策略缺失，容易在规模化部署时被放大。

**修复优先级:**
未启用异常检测会让成本突增在较长时间内无人察觉，可能造成可观的额外费用并影响多个环境/资源组。该问题越晚修复，潜在损失累积越大，且属于可通过配置快速缓解的风险。

**修复建议:**
在安装/初始化流程中为两个RG默认启用 Cost Anomaly Detection，并将告警路由到资源Owner及默认通知渠道。补充安装后校验（或策略/模板）以确保新建RG同样自动启用并具备正确的通知接收者。 

---

### MP-402 🔴 **紧急**

**概述:**
该问题的核心在于 Celery worker 目前使用 CPU 作为扩缩容信号，但 CPU 与实际吞吐/积压并不强相关，导致扩缩容决策失真。影响范围主要在推荐系统的异步任务处理链路，可能出现队列积压时扩容不及时，或负载波动时无谓扩容。结果会带来任务延迟、SLA 不稳定以及资源成本浪费。严重程度中到高，取决于队列峰值与业务对延迟的敏感度。

**修复优先级:**
该问题会直接影响任务处理时延与稳定性，在流量高峰或队列突增时容易形成积压并放大业务影响；同时也可能长期造成资源浪费与成本上升。

**修复建议:**
引入 KEDA 基于队列长度（Redis/RabbitMQ/Kafka 等）作为 HPA 触发指标来扩缩容 Celery workers，并设置合理的 min/max replicas、cooldown/scale-up 策略。上线前通过压测与历史队列数据校准阈值与扩缩容速率，避免抖动与过度扩容。

---

### MP-403 🔴 **紧急**

**概述:**
该 Bug 的核心问题是在 AKS 上关键服务未配置 PodDisruptionBudget（PDB）。在节点维护、排空或集群升级时，可能会同时驱逐过多副本，导致服务不可用或出现明显降级。影响范围涵盖 Backend、Celery、Knowledge 等关键工作负载及其他关键服务。严重程度偏高，因为会在计划内运维场景下引发可预期的停机风险并降低集群可靠性。

**修复优先级:**
该问题会在常见的节点升级/维护操作中触发，可能直接导致生产停机或任务中断，影响面覆盖所有使用这些关键服务的用户与作业。

**修复建议:**
为 Backend、Celery、Knowledge 等关键 Deployment/StatefulSet 定义 PDB（如设置 minAvailable 或 maxUnavailable），并结合实际副本数与可用区/节点分布校验在 drain/upgrade 时仍满足最小可用实例数；将其纳入 Helm/manifest 与发布流程的标准配置。

---

### MP-408 🔴 **紧急**

**概述:**
应用通过未鉴权的公开端点（如 /version.json）暴露了详细的版本与构建元数据（buildId、buildDate、releaseHash 等）。这些信息可被攻击者用于指纹识别当前部署版本，并与已知漏洞/利用链进行关联，从而提升侦察与定向攻击的成功率。影响范围覆盖所有可访问该公开端点的匿名用户与外部访问者，属于信息泄露类安全问题。严重程度中到高：本身不一定直接导致入侵，但会显著降低攻击成本并放大其他漏洞风险。

**修复优先级:**
该信息对所有未认证访问者可见，属于低成本、高覆盖面的安全暴露点，会直接提升攻击者进行版本匹配与漏洞利用的效率，应尽快降低暴露面。

**修复建议:**
将 /version.json 的详细字段从匿名响应中移除或改为仅返回必要的高层版本号，并对包含 buildId/buildDate/releaseHash 等敏感元数据的接口增加鉴权（仅管理员/内部网络/监控系统可访问）。同时更新安全与运维文档，明确对外暴露策略与例外审批流程。

---

### MP-409 🔴 **紧急**

**概述:**
应用当前仅对通过 Entra ID 登录的用户具备较强的条件访问与 MFA 保障，而未使用 Entra ID 的用户（本地账号、外部 IdP 且未强制 MFA、邮箱/密码流程）可仅凭单因素登录。该不一致导致非 Entra ID 用户成为“最弱环节”，更易遭受钓鱼、撞库、暴力破解等导致的账号接管。影响范围覆盖所有非 Entra ID 登录人群，并可能波及高权限账号与敏感数据访问。整体属于高严重度的安全缺陷，存在合规与治理风险。

**修复优先级:**
这是直接降低认证强度的安全问题，攻击者可优先针对未强制 MFA 的账号实施接管并访问应用数据，风险面随用户规模扩大而扩大。若系统涉及敏感/个人数据或管理操作，还可能触发内外部 MFA 合规要求，需尽快收敛风险。

**修复建议:**
为所有非 Entra ID 账号引入并强制 MFA：要求首次登录完成 MFA 绑定（优先 WebAuthn/FIDO2 或 TOTP，SMS 仅作为兜底），并在登录及高风险操作（管理、配置变更、导出等）执行 step-up MFA。对外部 IdP 要求其侧强制 MFA 或在应用侧补充统一的 MFA/条件策略，确保各类用户达到等效的认证强度。

---

### MP-410 🔴 **紧急**

**概述:**
新用户首次访问时会弹出“User Notice”对话框，但其内容与行为完全由厂商静态定义，租户管理员无法在后台或设置界面进行任何自定义。该限制使企业客户无法加入组织特定的法律/合规条款、数据保护声明或内部政策链接，也无法按地区/语言/业务单元差异化展示。由此可能导致产品内提示与客户实际合规要求不一致，在发生安全或合规事件时产生法律责任与取证上的不确定性。整体影响面主要集中在企业/多租户客户的合规与法务场景，严重程度中到高（取决于行业监管强度）。

**修复优先级:**
该问题直接影响合规与法务风险控制，尤其对受监管行业或跨区域客户可能造成上线阻断或合同/审计不通过。影响范围覆盖所有新用户入门流程且难以通过现有配置绕过，因此需要尽快提供可配置能力或替代方案。

**修复建议:**
新增“User Notice”管理配置：支持自定义标题与富文本内容（安全白名单/禁脚本）、可选政策链接与多语言版本，并可配置触发策略（首次/每次/内容变更后）及按角色/组/地区范围。引入版本化公告与用户确认记录（按用户存储已确认版本），当管理员更新内容时自动重新提示并记录审计信息。

---

### MP-411 🔴 **紧急**

**概述:**
当租户未启用或无法使用 Entra ID 集成时，应用内缺少“邀请用户”机制，管理员只能通过外部邮件工具手工邀请并提供注册/登录指引。该问题导致与启用 Entra ID 的租户相比，新用户入职体验不一致，并显著增加管理员操作成本与出错概率。同时缺少邀请事件的系统记录，削弱了审计追踪与治理能力。影响主要集中在未使用 Entra ID 的环境，严重程度偏中高（影响效率、体验与合规可审计性，但非直接功能崩溃）。

**修复优先级:**
该缺陷会持续影响所有未启用 Entra ID 的租户的用户增长与入职效率，并带来审计不可追踪与权限发放流程不规范的合规风险，容易引发支持工单与运营成本上升。

**修复建议:**
实现应用内邀请流程：管理员输入邮箱并可选分配角色/组，系统发送带有一次性、限时 token 的邀请链接，并支持邀请列表（待接受/已接受）与审计字段（邀请人、时间、状态）。同时提供基础配置（邮件模板、过期时间、默认角色）以与 Entra ID 场景的入职流程保持一致。

---

### MP-412 🔴 **紧急**

**概述:**
该 Bug 的核心问题是：非 Entra ID 认证的用户在应用内缺少自助“修改密码/找回密码”能力，只能依赖管理员重置。影响范围覆盖所有本地/应用账号或其他非联邦身份用户，导致用户无法按需更新凭据。该问题带来安全风险（密码长期不变、疑似泄露后无法及时自助处置）、运维成本上升（管理员工单量增加）以及合规与体验问题。整体严重程度中高，尤其在无 MFA 或有合规要求的场景下风险更突出。

**修复优先级:**
该缺陷直接影响账号安全与事件响应能力：用户在疑似泄露或需定期更换密码时无法自助完成，增加账户被攻破与横向移动风险。同时会持续增加管理员支持负担并造成处理延迟，影响面覆盖所有非 Entra ID 用户。

**修复建议:**
在用户已登录场景提供“修改密码”（校验旧密码+新密码强度/历史/复杂度规则），并补齐“忘记密码”邮件重置流程（一次性、短有效期 token + 安全重置页）。同时对 Entra ID 用户保持交由 IdP 管理，记录审计日志并加强风控（限流、告警、可选 MFA/二次验证）。

---

