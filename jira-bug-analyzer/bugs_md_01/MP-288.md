# MP-288: Missing Session Timeout Allows Indefinite Authenticated Sessions

**Status:** Backlog

**Assignee:** Unassigned

**Description:**
*Initial assumptions:*

* Logged in as user: {{krzysztof.dolecki}} on: {{https://trial.aicentral.top/?mode=default}}
* Application uses JWT tokens stored in {{localStorage}} ({{$sm-access-token}}, {{$sm-refresh-token}}) to maintain the authenticated session.
* No documented/visible session timeout behavior.

*Steps:*

# Open a fresh browser profile or clear browser storage (cookies, localStorage, sessionStorage).
# Navigate to the login page:
{{https://trial.aicentral.top/}}
# Log in as a valid user (e.g. {{krzysztof.dolecki}}) and confirm that the authenticated dashboard is displayed.
# Open browser DevTools → *Application → Local storage →* [+*https://trial.aicentral.top*+|https://trial.aicentral.top/] and confirm that:
#* {{$sm-access-token}} and {{$sm-refresh-token}} exist.
# Stop interacting with the application (no clicks, no navigation, no chat messages).
Leave the authenticated tab open and idle for at least *X minutes* (e.g. 30–60 minutes), which is a typical corporate/session timeout expectation.
# After the idle period, attempt to:
#* Refresh the dashboard page (F5), and
#* Navigate to other protected views (e.g. knowledge workspace, assistants, admin center).

*Current result:*

* After a prolonged idle period (no user interaction), the user *remains fully authenticated*:
** Refreshing the page still shows the authenticated dashboard.
** Protected resources (knowledge workspace, assistants, etc.) are accessible without re‑authentication.
* The embedded chatbot continues to operate as an authenticated user:
** Chat requests succeed and can access user-specific context.
* {{$sm-access-token}} and {{$sm-refresh-token}} in {{localStorage}} are still present and are used in API requests ({{Authorization: Bearer <token>}}).
* No “session expired” message, forced logout, or re-authentication prompt is presented to the user.
* There is no observable idle or absolute session timeout enforced by the application.

*Expected results:*

* The application should enforce a *session timeout* in line with OWASP recommendations and corporate security policy, for example:
** Idle timeout after a defined period of inactivity (e.g. 15–30 minutes).
** Optionally an absolute maximum session lifetime (e.g. several hours).
* After exceeding the idle/absolute timeout:
** The server must invalidate the current session / tokens.
** Subsequent requests with old tokens should be rejected (HTTP 401/403), and the UI should redirect the user to the login page with a clear “session expired” message.
* The embedded chatbot must follow the same timeout rules:
** After session timeout, it must not accept or use old access tokens.
** Any chat requests after timeout must be treated as unauthenticated.
* Tokens stored in {{localStorage}} should no longer be valid for authenticated API calls after timeout (even if they still exist client-side).

*Impact / Risk:*

* *Lack of session timeout* significantly increases the window of opportunity for attackers:
** If a user leaves a workstation unlocked, or closes only the browser tab without logging out, another person can continue using the authenticated session indefinitely.
** On shared or public devices, an attacker may gain unauthorized access to the victim’s account long after legitimate use.
* *Business impact:*
** Allows prolonged unauthorized use of compromised accounts,
** Increases risk of data exposure or misuse of AI/chatbot features under a victim’s identity,
** May violate internal security policies or external compliance requirements that mandate session timeout for applications handling sensitive or personal data.
