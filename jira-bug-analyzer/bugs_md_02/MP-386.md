# MP-386: API - error handling exposes technical details of an error 

**Status:** Backlog

**Assignee:** Unassigned

**Description:**
API error messages expose technical details, some include SQL statements.



{

    "code": 500,

    "data": *null*,

    "message": "Database error"

}

/api/v1/agent/deep_research/topics

/api/v1/all/

/api/v1/custom_component/

/api/v1/custom_component/reload/?path=

/api/v1/custom_component/update/

GET/POST /api/v1/flows/

GET/PATCH/DELETE /api/v1/flows/:flow_id/

/api/v1/flows/batch/

/api/v1/flows/upload/

/api/v1/flows/download/

/api/v1/users/

/api/v1/users/whoami/

All users endpoints



Empty request, different technical errors.

{

    "code": 500,

    "data": "'UserInfo' object has no attribute 'store_api_key'",

    "message": "Internal Server Error"

}

/api/v1/store/check/api_key/

GET, POST /api/v1/store/components/

/api/v1/store/components/:component_id/

/api/v1/store/components/:component_id/

/api/v1/store/users/likes/

/api/v1/store/users/likes/:component_id/



Another technical error:

{

    "code": 400,

    "data": {

        "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: \"4518834565808394241\"\nLINE 3: WHERE fnd_sys_user_apikey.user_id = '4518834565808394241'::U...\n                                            ^\n\n[SQL: SELECT fnd_sys_user_apikey.name, fnd_sys_user_apikey.created_at, fnd_sys_user_apikey.last_used_at, fnd_sys_user_apikey.total_uses, fnd_sys_user_apikey.is_active, fnd_sys_user_apikey.id, fnd_sys_user_apikey.api_key, fnd_sys_user_apikey.user_id \nFROM fnd_sys_user_apikey \nWHERE fnd_sys_user_apikey.user_id = %(user_id_1)s::UUID]\n[parameters: {'user_id_1': '4518834565808394241'}]\n(Background on this error at: [https://sqlalche.me/e/20/9h9h|https://sqlalche.me/e/20/9h9h|smart-link] )"

    },

    "message": ""

}

GET/ POST /api/v1/api_key/



{

    "code": 500,

    "data": {

        "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: \"4518834565808394241\"\nLINE 3: WHERE fnd_sys_user_credential.user_id = '4518834565808394241...\n                                                ^\n\n[SQL: SELECT fnd_sys_user_credential.name, fnd_sys_user_credential.value, fnd_sys_user_credential.provider, fnd_sys_user_credential.id, fnd_sys_user_credential.created_at, fnd_sys_user_credential.updated_at, fnd_sys_user_credential.user_id \nFROM fnd_sys_user_credential \nWHERE fnd_sys_user_credential.user_id = %(user_id_1)s::UUID]\n[parameters: {'user_id_1': '4518834565808394241'}]\n(Background on this error at: [https://sqlalche.me/e/20/9h9h|https://sqlalche.me/e/20/9h9h|smart-link] )"

    },

    "message": ""

}

/api/v1/credentials/



{

    "code": 500,

    "data": "the JSON object must be str, bytes or bytearray, not NoneType",

    "message": "Internal Server Error"

}

/lite_api/v1/flow/chat/:robot_id/

/lite_api/v1/flow/chat/
